$(document).ready(function() {

    $('.name_input').focus(function(){
        $(this).closest( ".contact_information" ).find('.name_label').addClass( "label_change" );
    });

    $('.name_input').blur(function(){
        if(!$('.name_input').val()){
            $(this).closest( ".contact_information" ).find('.name_label').removeClass( "label_change" );
        } 
    });


    $.validator.addMethod("phones", function(phone_number, element) {
        phone_number = phone_number.replace(/\(|\)|\s+|-/g, "");
        return this.optional(element) || phone_number.length > 9 && (phone_number.match(
                /^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/) || phone_number.match(
                /^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/
            ) || phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/) ||
            phone_number.match(
                /^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/));
    }, "Please specify a valid phone number");



    $.validator.addMethod("currency", function(value, element, param) {
        var isParamString = typeof param === "string",
            symbol = isParamString ? param : param[0],
            soft = isParamString ? true : param[1],
            regex;
        symbol = symbol.replace(/,/g, "");
        symbol = soft ? symbol + "]" : symbol + "]?";
        regex = "^[" + symbol +
            "([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$";
        regex = new RegExp(regex);
        return this.optional(element) || regex.test(value);
    }, "Please specify a valid currency");



    $("#contact_submit").validate({
        rules: {
            person_name: {
                required: true,
                minlength: 2
            },
            company_name: {
                required: true,
                minlength: 2
            },
            company_number: {
                required: true,
                phones: true
            },
            company_email: {
                required: true,
                email: true
            },
            company_details: {
                required: true
            }
        },
        messages: {
            person_name: "Please provide a valid name",
            company_name: "Enter a valid Company Name",
            company_number: "Valid # Required",
            company_email: "Valid Email Required",
            company_details: "Some details required. Please fill this out as much as possible."
        },
        errorPlacement: function(error, element) {
            element.attr("placeholder", error.text());
        },
    });



    $('#contact_submit').ajaxForm(function() {
        $('.template_contact_menus').val("");
        $('.template_contact_text2').val("");
        alert("Thank you for contacting us. Have a great day!");
    });


    $('#news_submit').ajaxForm(function() {
        $('.template_newsletter_info_email').val("");
        alert("Thank you for subscribing. Have a nice day!");
    });
});
